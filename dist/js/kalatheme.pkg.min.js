/*! kalatheme - v3.0.0+dev - 2014-04-28
* https://drupal.org/project/kalatheme
* Copyright (c) 2014 ; Licensed  */
!function(a){"use strict";var b=function(a){return(a||"ui-id")+"-"+Math.floor(1e3*Math.random()+1)};a(".alert").attr("role","alert"),a(".close").removeAttr("aria-hidden").wrapInner('<span aria-hidden="true"></span>').append('<span class="sr-only">Close</span>');var c=a.fn.tooltip.Constructor.prototype.show,d=a.fn.tooltip.Constructor.prototype.hide;a.fn.tooltip.Constructor.prototype.show=function(){c.apply(this,arguments);var a=this.tip(),d=a.attr("id")||b("ui-tooltip");a.attr({role:"tooltip",id:d}),this.$element.attr("aria-describedby",d)},a.fn.tooltip.Constructor.prototype.hide=function(){return d.apply(this,arguments),t(this.$element,"aria-describedby",this.tip().attr("id")),this};{var e=a.fn.popover.Constructor.prototype.setContent;a.fn.popover.Constructor.prototype.hide}a.fn.popover.Constructor.prototype.setContent=function(){e.apply(this,arguments);var a=this.tip(),c=a.attr("id")||b("ui-tooltip");a.attr({role:"alert",id:c}),this.$element.attr("aria-describedby",c),this.$element.focus()},a.fn.popover.Constructor.prototype.hide=function(){d.apply(this,arguments),t(this.$element,"aria-describedby",this.tip().attr("id"))},a(".modal-dialog").attr({role:"document"});var f=a.fn.modal.Constructor.prototype.hide;a.fn.modal.Constructor.prototype.hide=function(){var a=this.$element.parent().find('[data-target="#'+this.$element.attr("id")+'"]');f.apply(this,arguments),a.focus()};var g,h,i="[data-toggle=dropdown]",j=200,k=a(i).parent().find("ul").attr("role","menu"),l=k.find("li").attr("role","presentation");l.find("a").attr({role:"menuitem",tabIndex:"-1"}),a(i).attr({"aria-haspopup":"true","aria-expanded":"false"}),a(i).parent().on("shown.bs.dropdown",function(){g=a(this);var b=g.find(i);b.attr("aria-expanded","true"),setTimeout(function(){h=a(".dropdown-menu [role=menuitem]:visible",g)[0];try{h.focus()}catch(b){}},j)}),a(i).parent().on("hidden.bs.dropdown",function(){g=a(this);var b=g.find(i);b.attr("aria-expanded","false")}),a.fn.dropdown.Constructor.prototype.keydown=function(b){var c;/(32)/.test(b.keyCode)&&(c=a(this).parent(),a(this).trigger("click"),b.preventDefault()&&b.stopPropagation())},a(document).on("focusout.dropdown.data-api",".dropdown-menu",function(){var b=a(this),c=this;setTimeout(function(){a.contains(c,document.activeElement)||(b.parent().removeClass("open"),b.parent().find("[data-toggle=dropdown]").attr("aria-expanded","false"))},150)}).on("keydown.bs.dropdown.data-api",i+", [role=menu]",a.fn.dropdown.Constructor.prototype.keydown);var m=a(".nav-tabs"),n=m.children("li"),o=m.find('[data-toggle="tab"], [data-toggle="pill"]');m.attr("role","tablist"),n.attr("role","presentation"),o.attr("role","tab"),o.each(function(){var c=a(a(this).attr("href")),d=a(this),e=d.attr("id")||b("ui-tab");d.attr("id",e),d.parent().hasClass("active")?(d.attr({tabIndex:"0","aria-expanded":"true","aria-selected":"true","aria-controls":d.attr("href").substr(1)}),c.attr({role:"tabpanel",tabIndex:"0","aria-hidden":"false","aria-labelledby":e})):(d.attr({tabIndex:"-1","aria-expanded":"false","aria-selected":"false","aria-controls":d.attr("href").substr(1)}),c.attr({role:"tabpanel",tabIndex:"-1","aria-hidden":"true","aria-labelledby":e}))}),a.fn.tab.Constructor.prototype.keydown=function(b){var c,d,e=a(this),f=e.closest("ul[role=tablist] "),g=b.which||b.keyCode;if(e=a(this),/(37|38|39|40)/.test(g)){c=f.find("[role=tab]:visible"),d=c.index(c.filter(":focus")),(38==g||37==g)&&d--,(39==g||40==g)&&d++,0>d&&(d=c.length-1),d==c.length&&(d=0);var h=c.eq(d);"tab"===h.attr("role")&&h.tab("show").focus(),b.preventDefault(),b.stopPropagation()}},a(document).on("keydown.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',a.fn.tab.Constructor.prototype.keydown);var p=a.fn.tab.Constructor.prototype.activate;a.fn.tab.Constructor.prototype.activate=function(a,b){var c=b.find("> .active");c.find("[data-toggle=tab]").attr({tabIndex:"-1","aria-selected":!1,"aria-expanded":!1}),c.filter(".tab-pane").attr({"aria-hidden":!0,tabIndex:"-1"}),p.apply(this,arguments),a.addClass("active"),a.find("[data-toggle=tab]").attr({tabIndex:"0","aria-selected":!0,"aria-expanded":!0}),a.filter(".tab-pane").attr({"aria-hidden":!1,tabIndex:"0"})};var q=a('[data-toggle="collapse"]');q.attr({role:"tab","aria-selected":"false","aria-expanded":"false"}),q.each(function(){var c=a(this),d=a(c.attr("data-target")?c.attr("data-target"):c.attr("href")),e=c.attr("data-parent"),f=e&&a(e),g=c.attr("id")||b("ui-collapse");a(f).find("div:not(.collapse,.panel-body), h4").attr("role","presentation"),c.attr("id",g),f&&(f.attr({role:"tablist","aria-multiselectable":"true"}),d.hasClass("in")?(c.attr({"aria-controls":c.attr("href").substr(1),"aria-selected":"true","aria-expanded":"true",tabindex:"0"}),d.attr({role:"tabpanel",tabindex:"0","aria-labelledby":g,"aria-hidden":"false"})):(c.attr({"aria-controls":c.attr("href").substr(1),tabindex:"-1"}),d.attr({role:"tabpanel",tabindex:"-1","aria-labelledby":g,"aria-hidden":"true"})))});var r=a.fn.collapse.Constructor.prototype.toggle;a.fn.collapse.Constructor.prototype.toggle=function(){var b,c=this.$parent&&this.$parent.find('[aria-expanded="true"]');if(c){{var d,e=c.attr("data-target")||(b=c.attr("href"))&&b.replace(/.*(?=#[^\s]+$)/,""),f=a(e),g=this.$element;this.$parent}this.$parent&&(d=this.$parent.find('[data-toggle=collapse][href="#'+this.$element.attr("id")+'"]')),r.apply(this,arguments),a.support.transition&&this.$element.one(a.support.transition.end,function(){c.attr({"aria-selected":"false","aria-expanded":"false",tabIndex:"-1"}),f.attr({"aria-hidden":"true",tabIndex:"-1"}),d.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:"0"}),g.hasClass("in")?g.attr({"aria-hidden":"false",tabIndex:"0"}):(d.attr({"aria-selected":"false","aria-expanded":"false"}),g.attr({"aria-hidden":"true",tabIndex:"-1"}))})}else r.apply(this,arguments)},a.fn.collapse.Constructor.prototype.keydown=function(b){var c,d,e=a(this),f=e.closest("div[role=tablist] "),g=b.which||b.keyCode;e=a(this),/(32|37|38|39|40)/.test(g)&&(32==g&&e.click(),c=f.find("[role=tab]"),d=c.index(c.filter(":focus")),(38==g||37==g)&&d--,(39==g||40==g)&&d++,0>d&&(d=c.length-1),d==c.length&&(d=0),c.eq(d).focus(),b.preventDefault(),b.stopPropagation())},a(document).on("keydown.collapse.data-api",'[data-toggle="collapse"]',a.fn.collapse.Constructor.prototype.keydown),a(".carousel").each(function(){var b=a(this),c=b.find('[data-slide="prev"]'),d=b.find('[data-slide="next"]'),e=b.find(".item"),f=e.parent();b.attr({"data-interval":"false","data-wrap":"false"}),f.attr("role","listbox"),e.attr("role","option");var g=document.createElement("span");g.setAttribute("class","sr-only"),g.innerHTML="Previous";var h=document.createElement("span");h.setAttribute("class","sr-only"),h.innerHTML="Next",c.attr("role","button"),d.attr("role","button"),c.append(g),d.append(h),e.each(function(){var b=a(this);b.attr(b.hasClass("active")?{"aria-selected":"true",tabindex:"0"}:{"aria-selected":"false",tabindex:"-1"})})});var s=a.fn.carousel.Constructor.prototype.slide;a.fn.carousel.Constructor.prototype.slide=function(b,c){var d=this.$element.find(".item.active"),e=c||d[b]();s.apply(this,arguments),d.one(a.support.transition.end,function(){d.attr({"aria-selected":!1,tabIndex:"-1"}),e.attr({"aria-selected":!0,tabIndex:"0"})})},a.fn.carousel.Constructor.prototype.keydown=function(b){var c,d=a(this),e=d.closest("div[role=listbox]"),f=e.find("[role=option]"),g=e.parent(),h=b.which||b.keyCode;/(37|38|39|40)/.test(h)&&(c=f.index(f.filter(".active")),(37==h||38==h)&&(g.carousel("prev"),c--,0>c?c=f.length-1:d.prev().focus()),(39==h||40==h)&&(g.carousel("next"),c++,c==f.length?c=0:d.one(a.support.transition.end,function(){d.next().focus()})),b.preventDefault(),b.stopPropagation())},a(document).on("keydown.carousel.data-api","div[role=option]",a.fn.carousel.Constructor.prototype.keydown);var t=function(b,c,d){var e=(b.attr(c)||"").split(/\s+/),f=a.inArray(d,e);-1!==f&&e.splice(f,1),e=a.trim(e.join(" ")),e?b.attr(c,e):b.removeAttr(c)}}(jQuery),function(){!function(a){null==window.Drupal&&(window.Drupal={}),null==Drupal.CTools&&(Drupal.CTools={Modal:{show:null}}),Drupal.CTools.Modal.show=function(b){var c,d,e,f;d={},b&&"string"==typeof b&&Drupal.settings[b]?a.extend(!0,d,Drupal.settings[b]):b&&a.extend(!0,d,b),c={modalTheme:"CToolsModalDialog",throbberTheme:"CToolsModalThrobber",animation:"show",animationSpeed:"fast",modalSize:{type:"scale",width:.8,height:.8,addWidth:0,addHeight:0,contentRight:25,contentBottom:45},modalOptions:{opacity:.55,background:"#fff"}},f={},a.extend(!0,f,c,Drupal.settings.CToolsModal,d),Drupal.CTools.Modal.currentSettings&&Drupal.CTools.Modal.currentSettings!==f&&(Drupal.CTools.Modal.modal.remove(),Drupal.CTools.Modal.modal=null),Drupal.CTools.Modal.currentSettings=f,e=function(b){var c,d,e;c=b?document:Drupal.CTools.Modal.modal,"scale"===Drupal.CTools.Modal.currentSettings.modalSize.type?(e=a(window).width()*Drupal.CTools.Modal.currentSettings.modalSize.width,d=a(window).height()*Drupal.CTools.Modal.currentSettings.modalSize.height):(e=Drupal.CTools.Modal.currentSettings.modalSize.width,d=Drupal.CTools.Modal.currentSettings.modalSize.height),a("div.ctools-modal-dialog",c).css({width:e+Drupal.CTools.Modal.currentSettings.modalSize.addWidth+"px",height:d+Drupal.CTools.Modal.currentSettings.modalSize.addHeight+"px"}),a("div.ctools-modal-dialog .modal-body",c).css({width:e-Drupal.CTools.Modal.currentSettings.modalSize.contentRight+"px",height:d-Drupal.CTools.Modal.currentSettings.modalSize.contentBottom+"px"})},Drupal.CTools.Modal.modal||(Drupal.CTools.Modal.modal=a(Drupal.theme(f.modalTheme)),"scale"===f.modalSize.type&&a(window).bind("resize",e)),a("body").addClass("modal-open"),e(),a(".modal-title",Drupal.CTools.Modal.modal).html(Drupal.CTools.Modal.currentSettings.loadingText),Drupal.CTools.Modal.modalContent(Drupal.CTools.Modal.modal,f.modalOptions,f.animation,f.animationSpeed),a("#modalContent .modal-body").html(Drupal.theme(f.throbberTheme))},Drupal.CTools.Modal.dismiss=function(){console.log("oi"),Drupal.CTools.Modal.modal&&(a("body").removeClass("modal-open"),Drupal.CTools.Modal.unmodalContent(Drupal.CTools.Modal.modal))},null==Drupal.theme&&(Drupal.theme=function(){}),Drupal.theme.prototype.CToolsModalDialog=function(){var a;return a="",a+='  <div id="ctools-modal">',a+='    <div class="ctools-modal-dialog modal-dialog">',a+='      <div class="modal-content">',a+='        <div class="modal-header">',a+='          <button type="button" class="close ctools-close-modal" aria-hidden="true">&times;</button>',a+='          <h4 id="modal-title" class="modal-title">&nbsp;</h4>',a+="        </div>",a+='        <div id="modal-content" class="modal-body">',a+="        </div>",a+="      </div>",a+="    </div>",a+="  </div>"},Drupal.theme.prototype.CToolsModalThrobber=function(){var a;return a="",a+='  <div class="loading-spinner" style="position: absolute; top: 45%; left: 50%">',a+='    <i class="fa fa-cog fa-spin fa-3x"></i>',a+="  </div>"}}(jQuery)}.call(this),function(){!function(a){var b;return null==window.Drupal&&(window.Drupal={}),b=function(){function b(b,c,d,e){var f,g;this.id=b,this.updateCallback=c,this.method=d,this.errorCallback=e,f=a('<div class="progress-wrapper" aria-live="polite"></div>'),g='<div id ="'+this.id+'" class="progress progress-striped active"',g+='aria-describedby="message'+this.id+'">\n<div class="progress-bar"',g+=' role="progressbar" aria-valuemin="0" aria-valuemax="100" ',g+='aria-valuenow="0">\n<div class="percentage">\n</div>\n</div>\n</div>',g+="</div>\n",g+='<p class="message help-block" id="message'+this.id+'"></p>',f.html(g),this.element=f}var c;return c=b,b.prototype.setProgress=function(b,c){return b>=0&&100>=b&&(a(".progress-bar",this.element).css("width",b+"%"),a(".progress-bar",this.element).attr("aria-valuenow",b),a(".percentage",this.element).html(b+"%")),a(".message",this.element).html(c),this.updateCallback?this.updateCallback(b,c,this):void 0},b.prototype.startMonitoring=function(a,b){return this.delay=b,this.uri=a,this.sendPing()},b.prototype.stopMonitoring=function(){return clearTimeout(this.timer),this.uri=null},b.prototype.sendPing=function(){return this.timer&&clearTimeout(this.timer),this.uri?(c=this,a.ajax({type:this.method,url:this.uri,data:"",dataType:"json",success:function(a){return 0===a.status&&c.displayError(a.data),c.setProgress(a.percentage,a.message),c.timer=setTimeout(function(){return c.sendPing()},c.delay)},error:function(a){return c.displayError(Drupal.ajaxError(a,c.uri))}})):void 0},b.prototype.displayError=function(b){var c,d;return d='<div class="alert alert-block alert-error" role="alert">',d+='<button type="button" class="close"',d+=' data-dismiss="alert">&times;</button>',d+="<h4>Error message</h4></div>",c=a(d).append(b),a(this.element).before(c).hide(),this.errorCallback?this.errorCallback(this):void 0},b}(),Drupal.progressBar=b}(jQuery)}.call(this);
//# sourceMappingURL=kalatheme.map